   DECLARE @NROCOMPROBANTE VARCHAR(20)
   DECLARE @CNS INT 
   SET @CNS=1
   DECLARE PG_CURSOR CURSOR FOR      
   SELECT NROCOMPROBANTE FROM MCP WHERE COMPROBANTE='01'
   GROUP BY NROCOMPROBANTE
   ORDER BY NROCOMPROBANTE ASC
   OPEN PG_CURSOR    
   FETCH NEXT FROM PG_CURSOR    
   INTO @NROCOMPROBANTE
   WHILE @@FETCH_STATUS = 0    
   BEGIN 
      UPDATE MCP SET NOREFERENCIA=REPLACE(SPACE(8 - LEN(@CNS))+LTRIM(RTRIM(@CNS)),SPACE(1),0)
      WHERE NROCOMPROBANTE=@NROCOMPROBANTE
      SELECT @CNS=@CNS+1
   FETCH NEXT FROM PG_CURSOR    
   INTO @NROCOMPROBANTE
   END
   CLOSE PG_CURSOR
   DEALLOCATE PG_CURSOR