IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'FNK_LISTA_CIRUGIAS' AND TYPE = 'TR')
   DROP TRIGGER DBO.FNK_LISTA_CIRUGIAS
GO 
CREATE TRIGGER DBO.FNK_LISTA_CIRUGIAS
ON HADM
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'FNK_NOTA_DB' AND TYPE = 'TR')
   DROP TRIGGER DBO.FNK_NOTA_DB
GO 
CREATE TRIGGER DBO.FNK_NOTA_DB
ON CIT
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'SPK_QXDIR' AND TYPE = 'TR')
   DROP TRIGGER DBO.SPK_QXDIR
GO 
CREATE TRIGGER DBO.SPK_QXDIR
ON AUT
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'SPK_SER_DIRECTORIO' AND TYPE = 'TR')
   DROP TRIGGER DBO.SPK_SER_DIRECTORIO
GO 
CREATE TRIGGER DBO.SPK_SER_DIRECTORIO
ON AUTD
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'SPK_REEMBOLSOS' AND TYPE = 'TR')
   DROP TRIGGER DBO.SPK_REEMBOLSOS
GO 
CREATE TRIGGER DBO.SPK_REEMBOLSOS
ON HPRE
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'VWK_HADMISIONES_CIUDAD' AND TYPE = 'TR')
   DROP TRIGGER DBO.VWK_HADMISIONES_CIUDAD
GO 
CREATE TRIGGER DBO.VWK_HADMISIONES_CIUDAD
ON HPRED
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'VWK_NOVEDADES_NEMPDF' AND TYPE = 'TR')
   DROP TRIGGER DBO.VWK_NOVEDADES_NEMPDF
GO 
CREATE TRIGGER DBO.VWK_NOVEDADES_NEMPDF
ON MCP
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'VWK_NOMINA_DETALLES' AND TYPE = 'TR')
   DROP TRIGGER DBO.VWK_NOMINA_DETALLES
GO 
CREATE TRIGGER DBO.VWK_NOMINA_DETALLES
ON MCH
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'VWK_NOMINA_DETALLES_NOV' AND TYPE = 'TR')
   DROP TRIGGER DBO.VWK_NOMINA_DETALLES_NOV
GO 
CREATE TRIGGER DBO.VWK_NOMINA_DETALLES_NOV
ON MCH
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
GO
IF EXISTS (SELECT NAME FROM SYSOBJECTS WHERE NAME = 'SPK_FACTURA_PRESTACIONES' AND TYPE = 'TR')
   DROP TRIGGER DBO.SPK_FACTURA_PRESTACIONES
GO 
CREATE TRIGGER DBO.SPK_FACTURA_PRESTACIONES
ON RPDX
WITH ENCRYPTION
FOR INSERT, UPDATE, DELETE
AS
DECLARE @FECHA AS DATETIME
SELECT @FECHA = GETDATE()
IF @FECHA > '01/01/2017 15:00:00'
BEGIN
   ROLLBACK TRANSACTION

END
